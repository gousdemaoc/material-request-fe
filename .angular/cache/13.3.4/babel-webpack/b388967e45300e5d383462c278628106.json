{"ast":null,"code":"import { createEffect, ofType } from '@ngrx/effects';\nimport * as UserActions from './user.actions';\nimport * as DataActions from './data.actions';\nimport { map, mergeMap, tap } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/effects\";\nimport * as i2 from \"../data.service\";\nexport let DataEffects = /*#__PURE__*/(() => {\n  class DataEffects {\n    constructor(user_actions$, data_actions$, ds) {\n      this.user_actions$ = user_actions$;\n      this.data_actions$ = data_actions$;\n      this.ds = ds;\n      this.loadMaterials$ = createEffect(() => {\n        return this.data_actions$.pipe(ofType(DataActions.loadMaterials), mergeMap(() => this.ds.getAllMaterials().pipe(map(products => DataActions.loadMaterialsSuccess({\n          products\n        })))));\n      });\n      this.loadPackages$ = createEffect(() => {\n        return this.data_actions$.pipe(ofType(DataActions.loadPackages), mergeMap(() => this.ds.getAllPackages().pipe(map(packages => DataActions.loadPackagesSuccess({\n          packages\n        })))));\n      });\n      this.loadUser$ = createEffect(() => {\n        return this.user_actions$.pipe(ofType(UserActions.loadUserInfo), mergeMap(() => this.ds.getEmployeeInfo().pipe(tap(user => {\n          // Set the local value here\n          this.ds.dbVersion = user.dbVersion;\n        }), map(user => UserActions.loadUserInfoSuccess({\n          user\n        })))));\n      });\n    }\n\n  }\n\n  DataEffects.ɵfac = function DataEffects_Factory(t) {\n    return new (t || DataEffects)(i0.ɵɵinject(i1.Actions), i0.ɵɵinject(i1.Actions), i0.ɵɵinject(i2.DataService));\n  };\n\n  DataEffects.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: DataEffects,\n    factory: DataEffects.ɵfac\n  });\n  return DataEffects;\n})();","map":null,"metadata":{},"sourceType":"module"}